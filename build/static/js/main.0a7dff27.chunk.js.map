{"version":3,"sources":["components/Filter.js","components/PersonForm.js","components/Persons.js","components/ErrorNotification.js","components/SuccessNotification.js","services/persons.js","App.js","index.js"],"names":["Filter","_ref","personFilter","handleChange","react_default","a","createElement","value","onChange","PersonForm","handleSubmit","person","onSubmit","name","event","target","number","type","Persons","persons","handleRemove","filteredPersons","filter","toLowerCase","includes","map","key","onClick","window","confirm","concat","id","remove","ErrorNotification","message","className","SuccessNotification","baseUrl","services_persons","axios","get","then","response","data","post","personId","delete","put","App","_useState","useState","_useState2","Object","slicedToArray","setPersons","_useState3","_useState4","newPerson","setNewPerson","_useState5","_useState6","setPersonFilter","_useState7","_useState8","errorMessage","setErrorMessage","_useState9","_useState10","successMessage","setSuccessMessage","showSuccessMessage","setTimeout","showErrorMessage","resetNewPerson","filterOutPerson","useEffect","personService","components_ErrorNotification","components_SuccessNotification","components_Filter","components_PersonForm","preventDefault","existingPerson","find","console","log","returnedPerson","catch","error","field","objectSpread","defineProperty","components_Persons","p","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.0a7dff27.chunk.js","sourcesContent":["import React from 'react'\n\nconst Filter = ({personFilter, handleChange}) => {\n  return (\n    <form>\n      <div>\n        rajaa näytettäviä <input value={personFilter} onChange={handleChange} />\n      </div>\n    </form>\n  )\n}\n\nexport default Filter;","import React from 'react';\n\nconst PersonForm = ({handleSubmit, person, handleChange}) => {\n  const handleNameChange = (event) => handleChange('name', event.target.value)\n  const handleNumberChange = (event) => handleChange('number', event.target.value)\n\n  return (\n    <form onSubmit={handleSubmit}>\n      <div>\n        nimi: <input value={person.name} onChange={handleNameChange} />\n      </div>\n      <div>numero: <input value={person.number} onChange={handleNumberChange} /></div>\n      <div>\n        <button type=\"submit\">lisää</button>\n      </div>\n    </form>\n  );\n};\n\nexport default PersonForm;","import React from 'react';\n\nconst Persons = ({persons, personFilter, handleRemove}) => {\n  const filteredPersons = persons.filter(person =>\n    person.name.toLowerCase().includes(personFilter.toLowerCase(), 0)\n  )\n\n  const remove = (person) => {\n    if (window.confirm(`Poistetaanko ${person.name}`)){\n      handleRemove(person.id)\n    }\n  }\n\n  const personRows = () => filteredPersons.map(person =>\n    <div key={person.name}>\n      {person.name} {person.number} <button onClick={() => remove(person)}>poista</button>\n    </div>\n  )\n  return (\n    <div>\n      {personRows()}\n    </div>\n  );\n};\n\nexport default Persons;","import React from 'react';\n\nconst ErrorNotification = ({message}) => {\n  if (message === null) return null\n\n  return (\n    <div className='errorNotification'>\n      {message}\n    </div>\n  );\n};\n\nexport default ErrorNotification;","import React from 'react';\n\nconst SuccessNotification = ({message}) => {\n  if (message === null) return null\n\n  return (\n    <div className='successNotification'>\n      {message}\n    </div>\n  );\n};\n\nexport default SuccessNotification;","import axios from 'axios'\n\nconst baseUrl = '/api/persons'\n\nconst getAll = () => (\n  axios\n    .get(baseUrl)\n    .then(response => response.data)\n)\n\nconst create = (person) => (\n  axios\n    .post(`${baseUrl}`, person)\n    .then(response => response.data)\n)\n\nconst remove = (personId) => (\n  axios\n    .delete(`${baseUrl}/${personId}`)\n)\n\nconst update = (id, person) => (\n  axios\n    .put(`${baseUrl}/${id}`, person)\n    .then(response => response.data)\n)\n\nexport default {\n  getAll,\n  create,\n  remove,\n  update\n}","import React, { useEffect, useState } from 'react'\nimport Filter from './components/Filter'\nimport PersonForm from './components/PersonForm'\nimport Persons from './components/Persons';\nimport ErrorNotification from './components/ErrorNotification'\nimport SuccessNotification from './components/SuccessNotification'\nimport personService from './services/persons'\n\nconst App = () => {\n  const [ persons, setPersons] = useState([]) \n  const [ newPerson, setNewPerson ] = useState({\n    name: '',\n    number: ''\n  })\n  const [ personFilter, setPersonFilter ] = useState('')\n  const [ errorMessage, setErrorMessage ] = useState(null)\n  const [ successMessage, setSuccessMessage ] = useState(null)\n\n  const showSuccessMessage = (message) => {\n    setSuccessMessage(message)\n    setTimeout(() =>\n      setSuccessMessage(null),\n      5000\n    )\n  }\n\n  const showErrorMessage = (message) => {\n    setErrorMessage(message)\n    setTimeout(() =>\n      setErrorMessage(null),\n      5000\n    )\n  }\n\n  const resetNewPerson = () => {\n    setNewPerson({\n      name: '',\n      number: ''\n    })\n  }\n\n  const handlePersonChange = (field, value) => {\n    setNewPerson({\n      ...newPerson,\n      [field]: value\n    })\n  }\n\n  const handlePersonFilterChange = (event) => {\n    setPersonFilter(event.target.value)\n  }\n\n  const filterOutPerson = (id) => {\n    setPersons(persons.filter(person =>\n      person.id !== id\n    ))\n  }\n\n  const addPerson = (event) => {\n    event.preventDefault()\n\n    const existingPerson = persons.find(person => person.name === newPerson.name)\n\n    if (existingPerson) {\n      console.log('Found existing person', existingPerson)\n      const shouldReplace = window.confirm(`${newPerson.name} on jo luettelossa. Korvataanko vanha numero uudella?`)\n      \n      if (!shouldReplace) return\n\n      personService\n        .update(existingPerson.id, newPerson)\n        .then(returnedPerson => {\n          setPersons(persons.map(person =>\n            person.id === existingPerson.id\n            ? returnedPerson\n            : person\n          ))\n          resetNewPerson()\n          showSuccessMessage(`Päivitettiin ${returnedPerson.name}`)\n        }).catch(error => {\n          showErrorMessage(`Henkilö ${existingPerson.name} on jo poistettu`)\n          filterOutPerson(existingPerson.id)\n        })\n    } else {\n      personService\n      .create(newPerson)\n      .then(person => {\n        setPersons(persons.concat(person))\n        resetNewPerson()\n        showSuccessMessage(`Lisättiin ${person.name}`)\n      }).catch(error => {\n        showErrorMessage(error.response.data.error)\n      })\n    }\n  }\n\n  const removePerson = (id) => {\n    personService\n      .remove(id)\n      .then(() => {\n        const person = persons.find(p => p.id === id)\n        setPersons(persons.filter(person => person.id !== id))\n        showSuccessMessage(`Poistettiin ${person.name}`)\n      }).catch(error => {\n        const person = persons.find(p => p.id === id)\n        // Is it really an error then if the person has already been removed?\n        showErrorMessage(`Henkilö ${person.name} on jo poistettu`)\n        filterOutPerson(id)\n      })\n  }\n\n  const hook = () => {\n    personService\n      .getAll()\n      .then(persons => setPersons(persons))\n  }\n\n  useEffect(hook, [])\n\n  return (\n    <div>\n      <h2>Puhelinluettelo</h2>\n      <ErrorNotification message={errorMessage} />\n      <SuccessNotification message={successMessage} />\n      <Filter\n        personFilter={personFilter}\n        handleChange={handlePersonFilterChange}\n      />\n      <h3>lisää uusi</h3>\n      <PersonForm\n        handleSubmit={addPerson}\n        person={newPerson}\n        handleChange={handlePersonChange}\n      />\n      <h2>Numerot</h2>\n      <Persons\n        persons={persons}\n        personFilter={personFilter}\n        handleRemove={removePerson}\n      />\n    </div>\n  )\n\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}