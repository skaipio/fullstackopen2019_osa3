(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(e,n,t){e.exports=t(41)},20:function(e,n,t){},41:function(e,n,t){"use strict";t.r(n);var a=t(0),u=t.n(a),r=t(12),c=t.n(r),i=(t(20),t(4)),o=t(13),l=t(2),m=function(e){var n=e.personFilter,t=e.handleChange;return u.a.createElement("form",null,u.a.createElement("div",null,"rajaa n\xe4ytett\xe4vi\xe4 ",u.a.createElement("input",{value:n,onChange:t})))},f=function(e){var n=e.handleSubmit,t=e.person,a=e.handleChange;return u.a.createElement("form",{onSubmit:n},u.a.createElement("div",null,"nimi: ",u.a.createElement("input",{value:t.name,onChange:function(e){return a("name",e.target.value)}})),u.a.createElement("div",null,"numero: ",u.a.createElement("input",{value:t.number,onChange:function(e){return a("number",e.target.value)}})),u.a.createElement("div",null,u.a.createElement("button",{type:"submit"},"lis\xe4\xe4")))},s=function(e){var n=e.persons,t=e.personFilter,a=e.handleRemove,r=n.filter(function(e){return e.name.toLowerCase().includes(t.toLowerCase(),0)});return u.a.createElement("div",null,r.map(function(e){return u.a.createElement("div",{key:e.name},e.name," ",e.number," ",u.a.createElement("button",{onClick:function(){return function(e){window.confirm("Poistetaanko ".concat(e.name))&&a(e.id)}(e)}},"poista"))}))},d=function(e){var n=e.message;return null===n?null:u.a.createElement("div",{className:"errorNotification"},n)},v=function(e){var n=e.message;return null===n?null:u.a.createElement("div",{className:"successNotification"},n)},h=t(3),p=t.n(h),E="/api/persons",b=function(){return p.a.get(E).then(function(e){return e.data})},g=function(e){return p.a.post("".concat(E),e).then(function(e){return e.data})},j=function(e){return p.a.delete("".concat(E,"/").concat(e))},O=function(e,n){return p.a.put("".concat(E,"/").concat(e),n).then(function(e){return e.data})},w=function(){var e=Object(a.useState)([]),n=Object(l.a)(e,2),t=n[0],r=n[1],c=Object(a.useState)({name:"",number:""}),h=Object(l.a)(c,2),p=h[0],E=h[1],w=Object(a.useState)(""),C=Object(l.a)(w,2),k=C[0],S=C[1],F=Object(a.useState)(null),N=Object(l.a)(F,2),y=N[0],P=N[1],L=Object(a.useState)(null),x=Object(l.a)(L,2),H=x[0],J=x[1],R=function(e){J(e),setTimeout(function(){return J(null)},5e3)},T=function(e){P(e),setTimeout(function(){return P(null)},5e3)},B=function(){E({name:"",number:""})},D=function(e){r(t.filter(function(n){return n.id!==e}))};return Object(a.useEffect)(function(){b().then(function(e){return r(e)})},[]),u.a.createElement("div",null,u.a.createElement("h2",null,"Puhelinluettelo"),u.a.createElement(d,{message:y}),u.a.createElement(v,{message:H}),u.a.createElement(m,{personFilter:k,handleChange:function(e){S(e.target.value)}}),u.a.createElement("h3",null,"lis\xe4\xe4 uusi"),u.a.createElement(f,{handleSubmit:function(e){e.preventDefault();var n=t.find(function(e){return e.name===p.name});if(n){if(console.log("Found existing person",n),!window.confirm("".concat(p.name," on jo luettelossa. Korvataanko vanha numero uudella?")))return;O(n.id,p).then(function(e){r(t.map(function(t){return t.id===n.id?e:t})),B(),R("P\xe4ivitettiin ".concat(e.name))}).catch(function(e){T("Henkil\xf6 ".concat(n.name," on jo poistettu")),D(n.id)})}else g(p).then(function(e){r(t.concat(e)),B(),R("Lis\xe4ttiin ".concat(e.name))}).catch(function(e){return T("Ei voitu lis\xe4t\xe4 henkil\xf6\xe4 ".concat(p.name))})},person:p,handleChange:function(e,n){E(Object(o.a)({},p,Object(i.a)({},e,n)))}}),u.a.createElement("h2",null,"Numerot"),u.a.createElement(s,{persons:t,personFilter:k,handleRemove:function(e){j(e).then(function(){var n=t.find(function(n){return n.id===e});r(t.filter(function(n){return n.id!==e})),R("Poistettiin ".concat(n.name))}).catch(function(n){var a=t.find(function(n){return n.id===e});T("Henkil\xf6 ".concat(a.name," on jo poistettu")),D(e)})}}))};c.a.render(u.a.createElement(w,null),document.getElementById("root"))}},[[14,2,1]]]);
//# sourceMappingURL=main.448eb35c.chunk.js.map